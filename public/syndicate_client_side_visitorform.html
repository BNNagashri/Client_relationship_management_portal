<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/signup.css">
    <title>Connect Form</title>
</head>
<body>
    <div class="container">
        <div class="overlay-container" id="overlayContainer">
            <div class="overlay-panel overlay-left">
                <img src="./assets/posspole_logo.png" alt="Posspole Logo" class="overlay-image">
                <h1>Namaste!</h1>
                <p>Welcome to POSSPOLE!</p>
            </div>
        </div>
        <div class="form-container">
            <form id="connectForm">
                <h1>Fill Details</h1>
                <input type="text" id="personToMeet" placeholder="I'm here to Meet" required />
                <input type="text" id="name" placeholder="Name" required />
                <input type="tel" id="phone" placeholder="Phone Number" required />
                <input type="text" id="companyName" placeholder="CompanyName" required />
                <input type="email" id="email" placeholder="Email" />
                <select id="personReferred" required>
                    <option value="">I'm Referred by?</option>
                    <!-- Options will be dynamically added here -->
                </select>
                
                <input type="text" id="domain-input" placeholder="Ex: Fintech, Edtech, Medtech, etc.">
                <ul id="suggestions" style="display: none;"></ul>
                <input type="text" id="custom-domain" placeholder="Specify your domain" style="display: none;">
                <p id="error-message" style="color: red; display: none;">Please select a valid domain from the list or specify a custom one.</p>



                <!-- Button for capturing face image -->
                <button type="button" id="captureFace">Capture Face Image</button>
            
                <!-- New input for uploading an image from the device -->
                <input type="file" id="uploadImage" accept="image/*" style="display:none;" />
                <button type="button" id="uploadImageButton">Upload Image</button>
            
                <!-- Placeholder for displaying captured/uploaded image -->
                <div id="capturedImages">
                    <h2>Captured/Uploaded Image:</h2>
                    <div id="faceImageDisplay"></div>
                </div>
            
                <button type="submit">Let's Connect</button>
            </form>
            
            <div class="thank-you-container" id="thankYouContainer" style="display:none;">
                <img src="assets/posspole_logo.png" alt="Posspole Logo" class="overlay-image">
                <h1>Thank you for filling out the form!</h1>
                <p>You will be redirected to the main dashboard in 3 seconds</p>
            </div>
        </div>
    </div>
    <div id="message"></div>

    <script type="module" src="./js/syndicate_client_side_visitor.js"></script>
   <script>
    
    document.addEventListener('DOMContentLoaded', function() {
        // Trigger the hidden file input when the "Upload Image" button is clicked
        document.getElementById('uploadImageButton').addEventListener('click', function() {
            document.getElementById('uploadImage').click(); // Trigger the hidden file input
        });

        // Event listener for when a file is selected
        document.getElementById('uploadImage').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Display the uploaded image in the image container
                    const imageDisplay = document.getElementById('faceImageDisplay');
                    imageDisplay.innerHTML = `<img src="${e.target.result}" alt="Uploaded Image">`;
                    imageDisplay.style.display = 'flex'; 
                };
                reader.readAsDataURL(file); // Read the file as a Data URL for preview
            }
        });
    });
    
    
        
    const domains = [
    { name: "Health Care", popularity: 90 },
    { name: "Food", popularity: 85 },
    { name: "Agriculture", popularity: 70 },
    { name: "IT Software", popularity: 95 },
    { name: "Electronics", popularity: 75 },
    { name: "Government Agencies", popularity: 60 },
    { name: "NGO", popularity: 65 },
    { name: "Investors", popularity: 80 },
    { name: "Civil Infrastructure", popularity: 68 },
    { name: "Future Mobility", popularity: 72 },
    { name: "Fintech", popularity: 90 },
    { name: "Architecture", popularity: 78 },
    { name: "Interior Design", popularity: 74 },
    { name: "Real Estate", popularity: 83 },
    { name: "Education", popularity: 88 },
    { name: "Biotech", popularity: 85 },
    { name: "Bio Informatics", popularity: 67 },
    { name: "Electrical", popularity: 76 },
    { name: "Semiconductors", popularity: 80 },
    { name: "Corporate", popularity: 82 },
    { name: "MNC", popularity: 77 },
    { name: "Promoters", popularity: 58 },
    { name: "B2B", popularity: 79 },
    { name: "Designers", popularity: 68 },
    { name: "IT Hardware", popularity: 75 },
    { name: "Manufacturer", popularity: 66 },
    { name: "Researcher", popularity: 85 },
    { name: "Others", popularity: 50 },
    { name: "Scientist", popularity: 70 },
    { name: "Defence", popularity: 78 },
    { name: "Energy", popularity: 84 },
    { name: "Telecommunications", popularity: 81 },
    { name: "Retail", popularity: 87 },
    { name: "Banking", popularity: 93 },
    { name: "E-commerce", popularity: 88 },
    { name: "Marketing", popularity: 82 },
    { name: "Logistics", popularity: 76 },
    { name: "Aerospace", popularity: 75 },
    { name: "Automotive", popularity: 83 },
    { name: "Healthcare IT", popularity: 89 },
    { name: "Pharmaceuticals", popularity: 90 },
    { name: "Cybersecurity", popularity: 91 },
    { name: "Data Analytics", popularity: 92 },
    { name: "Machine Learning", popularity: 94 },
    { name: "AI & Robotics", popularity: 96 },
    { name: "Climate Tech", popularity: 82 },
    { name: "Blockchain", popularity: 88 },
    { name: "Smart Cities", popularity: 74 },
    { name: "SaaS", popularity: 85 },
    { name: "Insurance", popularity: 81 },
    { name: "Investment Banking", popularity: 87 },
    { name: "Capital Markets", popularity: 78 },
    { name: "Venture Capital", popularity: 83 },
    { name: "Environmental", popularity: 73 },
    { name: "Public Relations", popularity: 70 },
    { name: "Hospitality", popularity: 72 },
    { name: "Entertainment", popularity: 76 },
    { name: "Media & Journalism", popularity: 78 },
    { name: "Consumer Goods", popularity: 79 },
    { name: "Textile", popularity: 68 },
    { name: "Legal", popularity: 69 },
    { name: "Human Resources", popularity: 67 },
    { name: "Renewable Energy", popularity: 82 },
    { name: "Mining", popularity: 65 },
    { name: "Chemical Industry", popularity: 66 },
    { name: "Apparel & Fashion", popularity: 73 },
    { name: "Social Services", popularity: 60 },
    { name: "Transportation", popularity: 80 },
    { name: "Maritime", popularity: 59 },
    { name: "Photography", popularity: 55 },
    { name: "Construction", popularity: 71 },
    { name: "Waste Management", popularity: 63 },
    { name: "Animal Health", popularity: 61 },
    { name: "Luxury Goods", popularity: 69 },
    { name: "Tourism", popularity: 64 },
    { name: "Oceanography", popularity: 62 },
    { name: "Nanotechnology", popularity: 75 },
    { name: "Personal Finance", popularity: 72 },
    { name: "Behavioral Science", popularity: 68 },
    { name: "Human Rights", popularity: 66 },
    { name: "Urban Development", popularity: 77 },
    { name: "Renewable Resources", popularity: 74 },
    { name: "Drone Technology", popularity: 70 },
    { name: "Augmented Reality", popularity: 83 },
    { name: "Virtual Reality", popularity: 84 },
    { name: "Gaming", popularity: 85 },
    { name: "Event Management", popularity: 65 },
    { name: "Pension Funds", popularity: 62 },
    { name: "Agritech", popularity: 71 },
    { name: "Health Informatics", popularity: 80 },
    { name: "Ocean Conservation", popularity: 58 },
    { name: "Culinary Arts", popularity: 60 },
    { name: "Consumer Electronics", popularity: 81 },
    { name: "Digital Marketing", popularity: 83 },
    { name: "Product Development", popularity: 79 },
    { name: "Sustainable Development", popularity: 82 },
    { name: "Home Automation", popularity: 76 },
    { name: "Agronomy", popularity: 64 },
    { name: "Biometrics", popularity: 68 },
    { name: "Material Science", popularity: 78 },
    { name: "Petroleum Engineering", popularity: 66 },
    { name: "Music Production", popularity: 72 },
    { name: "Veterinary Sciences", popularity: 67 },
    { name: "Clinical Trials", popularity: 73 },
    { name: "Public Policy", popularity: 69 },
    { name: "Optics & Photonics", popularity: 62 },
    { name: "Home Security", popularity: 63 },
    { name: "Forestry", popularity: 60 },
    { name: "Speech Recognition", popularity: 76 },
    { name: "Smart Manufacturing", popularity: 79 },
    { name: "Genetics", popularity: 81 },
    { name: "Hydrology", popularity: 64 },
    { name: "Microbiology", popularity: 69 },
    { name: "Neurology", popularity: 75 },
    { name: "Renewable Infrastructure", popularity: 77 },
    { name: "Hydrogen Technology", popularity: 78 },
    { name: "Biofuel", popularity: 70 },
    { name: "Sports Science", popularity: 71 },
    { name: "Telemedicine", popularity: 82 },
    { name: "Telecommunications Equipment", popularity: 73 },
    { name: "Child Welfare", popularity: 59 },
    { name: "Behavioral Analytics", popularity: 72 }
];

const domainSet = new Set(domains.map(domain => domain.name)); // For validation

const input = document.getElementById('domain-input');
const suggestions = document.getElementById('suggestions');
const customDomainInput = document.getElementById('custom-domain');
const errorMessage = document.getElementById('error-message');

// Function to display suggestions
function displaySuggestions(list) {
    suggestions.innerHTML = '';
    list.forEach(domain => {
        const li = document.createElement('li');
        li.textContent = domain.name;
        li.style.padding = "10px";
        li.style.cursor = "pointer";
        suggestions.appendChild(li);
    });
    suggestions.style.display = 'block';
}

// Fuzzy matching for suggestions
function fuzzyMatch(query) {
    const lowercaseQuery = query.toLowerCase();
    return domains
        .filter(domain => domain.name.toLowerCase().includes(lowercaseQuery))
        .sort((a, b) => b.popularity - a.popularity);
}

// Debounce to handle excessive calls
function debounce(fn, delay) {
    let timer;
    return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => fn.apply(this, args), delay);
    };
}

// Display suggestions on input
input.addEventListener('input', debounce(function() {
    const query = input.value.toLowerCase();
    if (query) {
        const filteredDomains = fuzzyMatch(query);
        if (filteredDomains.length > 0) {
            displaySuggestions(filteredDomains);
        } else {
            suggestions.style.display = 'none';
        }
    } else {
        displaySuggestions(domains.slice(0, 10)); // Show top suggestions
    }
    errorMessage.style.display = 'none';
    customDomainInput.style.display = 'none'; // Hide custom input if typing something else
}, 300));

// Handle suggestion click
suggestions.addEventListener('click', function(e) {
    if (e.target.tagName === 'LI') {
        input.value = e.target.textContent;
        suggestions.style.display = 'none';

        if (e.target.textContent === "Others") {
            customDomainInput.style.display = 'block'; // Show custom input if "Others" is selected
            customDomainInput.focus();
        } else {
            customDomainInput.style.display = 'none';
        }
        errorMessage.style.display = 'none';
    }
});

// Validate input on blur
input.addEventListener('blur', function() {
    const userInput = input.value.trim();
    if (userInput === "Others") {
        // Ensure custom domain input is shown and not empty for "Others" selection
        if (customDomainInput.value.trim() === "") {
            errorMessage.textContent = "Please specify your domain.";
            errorMessage.style.display = 'block';
        }
    } else if (userInput && !domainSet.has(userInput)) {
        errorMessage.textContent = "Please select a valid domain from the list.";
        errorMessage.style.display = 'block';
        input.value = ''; // Clear invalid input
    }
});

   </script>
</body>
</html>
